{# This template is served inside a modal for both create and edit actions #}

<div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50" data-modal-close>
  <div
    class="bg-white rounded-lg shadow-lg w-full max-w-lg mx-4"
    hx-target="this"
    hx-swap="outerHTML"
    data-modal-close-except
  >
    <div class="px-6 py-4 border-b border-primary-200 flex items-center justify-between">
      <h3 class="text-lg font-medium text-primary-900">{{ title }}</h3>
      <button class="text-primary-400 hover:text-primary-600" data-modal-close>
        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <form
      hx-post="{{ action }}"
      hx-put="{{ action if is_edit else '' }}"
      hx-target="body"
      hx-swap="innerHTML"
      hx-headers='{"X-CSRFToken": "{{ csrf_token() }}"}'
      class="px-6 py-4 space-y-4"
    >
      <div>
        <label for="name" class="block text-sm font-medium text-primary-700 mb-1">Name</label>
        <input
          type="text"
          id="name"
          name="name"
          value="{{ prompt.name if is_edit else '' }}"
          required
          class="w-full px-3 py-2 border border-primary-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-accent-500 transition-colors"
        />
      </div>

      <div>
        <label for="content" class="block text-sm font-medium text-primary-700 mb-1">Content</label>
        <textarea
          id="content"
          name="content"
          rows="6"
          required
          class="w-full px-3 py-2 border border-primary-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-accent-500 transition-colors"
        >{{ prompt.content if is_edit else '' }}</textarea>
      </div>

      <div>
        <label for="tags" class="block text-sm font-medium text-primary-700 mb-1">Tags (comma separated)</label>
        <input
          type="text"
          id="tags"
          name="tags"
          placeholder="e.g. classification, marketing, aws"
          value="{{ tags_string if is_edit else '' }}"
          class="w-full px-3 py-2 border border-primary-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-accent-500 transition-colors"
        />
      </div>

      <div class="flex items-center justify-end space-x-2 pt-2">
        <button type="button" class="px-4 py-2 text-sm bg-white border border-primary-300 rounded-md text-primary-700 hover:bg-primary-50 transition-colors" data-modal-close>Cancel</button>
        <button type="submit" class="px-4 py-2 text-sm bg-accent-600 text-white rounded-md hover:bg-accent-700 transition-colors">Save</button>
      </div>
    </form>
  </div>
</div>
